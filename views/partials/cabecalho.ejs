<!-- partials/cabecalho.ejs -->
<header class="card smooth" style="display:flex; align-items:center; gap:16px; margin-bottom:18px;">
  <div style="display:flex; align-items:center; gap:12px;">
    <img src="<%= session && session.logo ? '/uploads/' + session.logo : '/img/logo_menu_256.png' %>"
         alt="Logo"
         style="width:56px; height:56px; object-fit:contain; border-radius:10px;"
         onerror="this.src='/img/logo_menu_256.png'">
    <div>
      <div style="font-weight:800; font-size:18px; color:var(--green-900)">Campo do Gado</div>
      <% if (typeof subtitle !== 'undefined' && subtitle) { %>
        <small class="small"><%= subtitle %></small>
      <% } %>
    </div>
  </div>

  <div style="margin-left:auto; display:flex; align-items:center; gap:12px;">
    <!-- Busca rápida -->
    <form action="/search" method="GET" style="display:flex; gap:8px; align-items:center;">
      <input type="search" name="q" placeholder="Pesquisar..." style="padding:8px 10px; border-radius:8px; border:1px solid #e2efe2;">
      <button class="btn btn-cinza-claro" type="submit" title="Pesquisar">
        <i class="fa-solid fa-magnifying-glass"></i>
      </button>
    </form>

    <!-- Usuário / Ações -->
    <% if (session && session.user) { %>
      <div style="display:flex; align-items:center; gap:10px;">
        <div style="text-align:right;">
          <div style="font-weight:700"><%= session.user %></div>
          <small class="small" style="color:#666"><%= session.role || '' %></small>
        </div>

        <a href="/perfil" class="btn btn-cinza-claro" title="Perfil">
          <i class="fa-solid fa-user"></i>
        </a>

        <a href="/logout" class="btn btn-cinza-escuro" title="Sair">
          <i class="fa-solid fa-right-from-bracket"></i>
        </a>
      </div>
    <% } else { %>
      <a href="/login" class="btn btn-verde-claro">Entrar</a>
    <% } %>
  </div>
</header>
